# Test #1

![RPS](./src/500users-1rps.png)

Настройки запуска нагрузочного тестирования. Увеличение пользователей на 25, всего пользователей 500, 1запрос/1секунда

На протяжении времени количество RPS держалось около 480-490, без срабатываний timeout'ов, или исключений.

CPU был загружен на 100%, через 5-10 секунд, после завершения тестирования, потребовалось, что бы задачи закончились из стека задач.

---

# Test #2

![RPS](./src/500users-4rps.png)


Настройки запуска нагрузочного тестирования. Увеличение пользователей на 25, всего пользователей 500, 4запросов/1секунда

На протяжении времени количество RPS держалось около 650-710, без срабатываний timeout'ов, или исключений.

CPU был загружен на 100%, через 20-30 секунд, после завершения тестирования, потребовалось, что бы задачи закончились из стека задач.

---

## Техническое оборудование:

* __CPU__ - AMD Ryzen 7 5800x 8-Core
* __RAM__ - DDR4 Kingston 2666 2 потока 4 плашки, каждая по 8 КГ

---

## Замечания и наблюдения:

Во время тестирования, CPU в обоих случаев загружена на 100%, разница лишь в скорости пополнения стека задач (rabbitmq)

RAM в обоих случаев нагружался до 50-55%, сервисы все запускались в docker, тесты запускались локально (не внутри docker'a)

Во втором случае замечен баг, который в скором будет поправляться, в бд просочились дубликаты, а именно 4 дубликата прошли сквозь систему,
предполагаю, что 4 запроса отправилось и redis с db взяли задачу в одно время, тем самым 4 воркера в одно и тоже время взяли задачу, в которые были одинаковы.

Предполагаемое решение, смотреть в сторону redis....
